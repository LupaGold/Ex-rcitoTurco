{% extends "BasePainel.html" %}
{% load static %}

{% block main %}
<style>
    .bg-cubos {
        background-color: #6b0b0a;
      }
</style>
<div class="container text-light mt-3 m-auto mb-3">
    <div class="container d-flex">
        <div>
            <img src="{% static 'bandeira-pt.png'%}" alt="">
        </div>
    <div class="ms-2">
    <h3> Página Principal</h3>
    <p>"Braço forte, mão amiga."</p>
</div>
</div>
    <div class="row mb-3 mt-2 mb-lg-0 ">
        <div class="card col-lg-3 col-md-11 col-11 shadow m-auto mt-1"  style="background-color: #93110e;">
            <div class="d-flex m-1">
            <div class="card col-4 mt-2 mb-2" style="background-color: #6b0b0a;">
                <div class="rounded-circle m-auto px" style="background: url({% static 'relatorio.png'%}) center center no-repeat; width: 80px; height: 80px;transform: scale(2);">
                </div>             </div>
            <div class="text-light col-8">
                <h5 class="text-center mt-2 ms-3">Treinamentos</h5>
                <h4 class="text-center mt-3 ms-3">{{TreinamentosContador}}</h4>
            </div>
        </div>
        </div>
        <div class="card col-lg-3 col-md-11 col-11 shadow m-auto mt-1"  style="background-color: #93110e;">
            <div class="d-flex m-1">
            <div class="card col-4 mt-2 mb-2" style="background-color: #6b0b0a;">
                <div class="rounded-circle m-auto px" style="background: url({% static 'auxilios.png'%}) center center no-repeat; width: 80px; height: 80px;transform: scale(2);">
                </div>             </div>
            <div class="text-light col-8">
                <h5 class="text-center mt-2 ms-3">Auxílios</h5>
                <h4 class="text-center mt-3 ms-3">{{AuxilioContador}}</h4>
            </div>
        </div>
        </div>
        <div class="card col-lg-3 col-md-11 col-11 shadow m-auto mt-1"  style="background-color: #93110e;">
            <div class="d-flex m-1">
            <div class="card col-4 mt-2 mb-2" style="background-color: #6b0b0a;">
                <div class="rounded-circle m-auto px" style="background: url({% static 're.gif'%}) center center no-repeat; width: 80px; height: 80px;transform: scale(2);">
                </div>
            </div>
            <div class="text-light col-8">
                <h5 class="text-center mt-2 ms-3">RE's</h5>
                <h4 class="text-center mt-3 ms-3">{{REContador}}</h4>
            </div>
        </div>
        </div>
    </div>
    <div class="row mt-lg-5">
        <div class="col-md-11 col-sm-11 col-lg-7">
            <div class="container d-flex mb-4 mb-lg-0 mt-4 ">
                <div>
                    <img src="{% static 'busca.gif'%}" alt="">
                </div>
            <div class="ms-2">
            <h3>Busca Militar</h3>
            <p>Você pode pesquisar em nossos registros aqui.</p>
        </div>
    </div>
    <div class="container card mt-2 m-auto shadow" style="background-color: #93110e;">
            <form class='input-group mt-2 mb-2' method="get">
                <input class='form-control' type="text" name="search" style='background:#f8f9fa;' placeholder="Digite o nick do militar">
                <button style="background: #6b0b0a" class='btn' type="submit">
                    <i>
                        <img width="35px" src="{% static "lupa.gif" %}" alt="">
                      </i>
                </button>
            </form>
    </div>
        {% if busca %}
        <div class='container card bg-pt shadown mt-3'>
        {% if militar %}
        <p class="m-1 text-light"><strong> Resultado da Busca: </strong></p>

            {% for user in militar %}
            <div class="card mb-3 bg-cubos shadow">
                <div class="row g-0">
                  <div class="col-xl-4 m-auto d-flex justify-content-center align-items-center">
                    <div class="rounded-circle border border-3 border-dark m-1" style="background: url(https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user={{user.username}}&direction=2&head_direction=3&size=l&action=std) center 35% no-repeat, url({% static 'bgfloresta.png'%}) center center no-repeat; width: 140px; height: 140px;">
                    </div>
            </div>
                  <div class="col-md-8">
                    <div class="card-body text-light">
                        <p> <strong> Nickname: </strong> {{user.username}}</p>
                        <p> <strong> Patente: </strong> {{user.patente}}</p>
                        {% if user.siglas %}
                        <p> <strong> Sigla: </strong> {{user.siglas}}</p>
                        {% endif %}
                        <p> <strong> Responsável pela promoção: </strong> <br>{{user.responsavel_promocao}}</p>
                        <p> <strong> Data: </strong> {{user.data}}</p>
                        <p> <strong> Status: </strong> {{user.status}}</p>
                        {% if user.status == 'Demitido' or user.status == 'Exilado' %}
                            <p><strong>Motivo:</strong> {{ user.demissao_motivo }}.</p>
                        {% endif %}
                        {% if honrarias %}
                            <div class="row col-10 mb-3">
                                <p> <strong> Honrarias: </strong></p>
                                {% for honraria in honrarias %}
                                <div class='col-3'>
                                <img src="{{honraria.honraria.icone.url}}" class="m-auto ms-2" alt="{{honraria.honraria}}" width='66.6px' height='18.3px'>
                                </div>
                                {% endfor %}
                            </div>
                            {% endif %}
                    </div>
                  </div>
                </div>
              </div>
            {% endfor %}
            {% else %}
            <div class="alert alert-danger m-auto mt-3 mb-3 col-12 text-center" role="alert">
              Militar não encontrado!
            </div>

      {% endif %}
    </div>
      {% endif %}

            <div class="container d-flex mb-2 mb-lg-0 mt-4 ">
                <div>
                    <img src="{% static 'forum.gif'%}" alt="">
                </div>
            <div class="ms-2">
            <h3>Fórum</h3>
            <p>Realize publicações.</p>
        </div>
    </div>
    <div class="container card" style="background: #93110e">
        <form class='mt-3 mb-3' method="post">
            {% csrf_token %}
            <div class="d-flex ">
                <div class="rounded-circle border border-3 border-light m-auto col-4" style="background: url(https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user={{ request.user.username}}&direction=2&head_direction=2&size=sm&action=std) center 30% no-repeat, url({% static 'bgfloresta.png'%}) center center no-repeat; width: 80px; height: 80px;">
                </div>
                <div class="container col-10">
                {{ form.as_p }}
            </div>
        </div>
        <hr class="text-light">
        <div class="d-flex justify-content-end me-3">
            <button class="btn btn-sm mt-2" style="background-color: silver;">Publicar</button>
        </div>
        </form>
    </div>
    {% for post in posts %}
    <div class="container card mt-3" style="background-color: #93110e;">
        <div class="row mt-3 mb-3">
            <div class="col-2">
                <div class="rounded-circle border border-2 border-light m-auto" style="background: url(https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user={{ post.autor.username}}&direction=2&head_direction=2&size=sm&action=std) center 35% no-repeat, url({% static 'bgfloresta.png'%}) center center no-repeat; width: 60px; height: 60px;">
                </div>
            </div>
            <div class="col-10 text-light">
                <h5 class="mt-1">{{ post.autor.username}}</h5>
                <p><small>{{post.data}}</small></p>
                <div class="card" style="background-color: #6b0b0a;">
                    <p class="m-2 text-light">{{post.texto}}</p>
                </div>
                {% if post.comentarios.all %}
                <p class="mt-2">Comentários:</p>
                      {% for comentario in post.comentarios.all %}
                      <div class="card mb-2" style="background-color: #6b0b0a;">
                      <div class="row mt-2 mb-2">
                        <div class="col-2">
                            <div class="rounded-circle border border-2 border-light m-auto px" style="background: url(https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user={{ comentario.autor.username}}&direction=2&head_direction=2&size=sm&action=std) center 35% no-repeat, url({% static 'bgfloresta.png'%}) center center no-repeat; width: 50px; height: 50px;">
                            </div>
                        </div>
                        <div class="col-10 text-light">
                            <p>{{comentario.autor.username}}</p>
                            <p>{{comentario.texto}}</p>
                        </div>
                      </div>
                    </div>
                  {% endfor %}
                  {% endif %}

                  <form class="mt-2" method="post">
                    <div class="input-group">
                    {% csrf_token %}
                    {{ comentario_form.as_p }}
                    <input type="hidden" name="post_id" value="{{ post.id }}">
                    <div>
                        <button class="btn ms-3" style='background: silver;' type="submit">Comentar</button>
                    </div>
                </div>
                </form>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
            <div class="col-md-11 col-12 col-lg-5 m-auto mt-4">
                <div class="container d-flex">
                    <div>
                        <img src="{% static 'even.png'%}" alt="">
                    </div>
                <div class="ms-2">
                <h3>Aviso</h3>
                <p>Fique atento aos avisos!</p>
            </div>
        </div>
        <div class="row">
            <div class="row mt-3 m-auto">
                    <div class="card m-auto col-md-10 col-12 text-center text-light" style='background-color: #93110e;'>
                    <div class="text-justify m-1 mt-2">
                    <p>O painel encontra-se em desenvolvimento!
                    Caso indentifique algum erro ou bug, notifique um oficial!</p>
                    </div></div>
                </div>
            </div>
                <div class="container d-flex mt-4 mb-3">
                    <div>
                      <img class="px" width="26px" height="41px" src="{% static 'emblema.png'%}" alt="">
                      </div>
                    <div class="ms-2">
                    <h3>Emblemas novos!</h3>
                    <p>Confira o último emblema adicionado!</p>
                    </div>
            </div>
            <div class="card col-12 col-md-8 mb-3 m-auto" style="background-color: #93110e;">
                <img src="{{ emblema.icone.url }}" class="m-auto mt-2 px" width="80px" alt="...">
                <div class="card-body">
                  <h5 class="card-title text-center text-light">{{ emblema.titulo }}</h5>
                  <div class="text-center">
                    <div class=" d-flex justify-content-center">
                    <div class="text-center text-light">
                        <h5>{{ emblema.moedas }}</h5>
                    </div>
                    <div>
                        <img src="{% static 'moedaloja.png'%}" alt="">
                    </div>
            </div>
        </div>
                </div>
              </div>
            <div class="container d-flex mt-4">
                <div>
                    <img src="{% static 'atalhos.png'%}" alt="">
                </div>
            <div class="ms-2">
            <h3>Atalhos</h3>
            <p></p>
        </div>
        </div>
            <div class="container">
                <a class="d-flex card col-lg-10 col-md-12 col-12 shadow m-auto mt-1 action-text text-decoration-none bg-primary" href="{% url "SegundaCIA" %}">
                    <div class="d-flex">
                        <div class="col-4 mt-2 mb-2">
                            <div class="rounded-circle m-auto px" style="background: url({% static 'relt.png'%}) center center no-repeat; width: 60px; height: 60px;">
                            </div>
                        </div>
                        <div class="text-light col-8">
                            <h5 class="text-center mt-4 me-5">Treinamentos</h5>
                        </div>
                    </div>
                </a>
                <a class="d-flex card col-lg-10 col-md-12 col-12 shadow m-auto mt-1 action-text text-decoration-none" style="background-color: #970808;" href="">
                    <div class="d-flex">
                        <div class="col-4 mt-2 mb-2">
                            <div class="rounded-circle m-auto px" style="background: url({% static 'usaveis.gif'%}) center center no-repeat; width: 60px; height: 60px;">
                            </div>
                        </div>
                        <div class="text-light col-8">
                            <h5 class="text-center mt-4 me-5">Fardamentos</h5>
                        </div>
                    </div>
                </a>
                <a class="d-flex card col-lg-10 col-md-12 col-12 shadow m-auto mt-1 action-text text-decoration-none" style="background-color: #a51d00;" href="{% url "JornalAlemao" %}">
                    <div class="d-flex">
                        <div class="col-4 mt-2 mb-2">
                            <div class="rounded-circle m-auto px" style="background: url({% static 'jornal.png'%}) center center no-repeat; width: 60px; height: 60px;">
                            </div>
                        </div>
                        <div class="text-light col-8">
                            <h5 class="text-center mt-4 me-5">Notícias</h5>
                        </div>
                    </div>
                </a>
                {% comment %} <a class="d-flex card col-lg-10 col-md-12 col-12 shadow m-auto mt-1 action-text text-decoration-none" style="background-color: #635036;" href="">
                    <div class="d-flex">
                        <div class="col-4 mt-2 mb-2">
                            <div class="rounded-circle m-auto px" style="background: url({% static 'parquedista.png'%}) center center no-repeat; width: 60px; height: 60px;">
                            </div>
                        </div>
                        <div class="text-light col-8">
                            <h5 class="text-center mt-4 me-5">Paraquedistas</h5>
                        </div>
                    </div>
                </a>
                <a class="d-flex card col-lg-10 col-md-12 col-12 shadow m-auto mt-1 action-text text-decoration-none" style="background-color: #181818;" href="">
                    <div class="d-flex">
                        <div class="col-4 mt-2 mb-2">
                            <div class="rounded-circle m-auto px" style="background: url({% static 'caveira.png'%}) center center no-repeat; width: 60px; height: 60px;">
                            </div>
                        </div>
                        <div class="text-light col-8">
                            <h5 class="text-center mt-4 me-5">Comandos</h5>
                        </div>
                    </div>
                </a> {% endcomment %}
        </div>
        </div>
</div>
</div>

{% endblock main %}