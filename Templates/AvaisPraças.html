{% extends "BasePainel.html" %}
{% load static %}

{% block main %}
<div class="container mt-3 m-auto text-light">
    <div class="container d-flex">
        <div>
            <img src="{% static 'ja.png'%}" alt="">
        </div>
    <div class="ms-2">
    <h3>Meus Avais</h3>
    <p>Os JA's servem para você poder se ausentar e não ser removido dos grupos externos.
    </p>
</div>
</div>
<p class="d-inline-flex gap-1 m-sm-auto mb-2" >
    <a class="btn btn-secondary" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
      Informações
    </a>
    <a href="{% url 'RegistrarAval'%}" class="btn m-sm-auto" style='background:silver;'> Registrar Aval</a>
  </p>
  <div class="collapse" id="collapseExample" >
    <div class="card card-body m-auto text-light mb-3 mt-2" style="background-color: #2C4C00;">
        Insira seus dados corretamente para concluir o aval.
        Caso você insira sem precisar estará sujeito a punições. <br>
        O dia de ida e de retorno também deve ser cumprido, caso contrário o militar está sujeito a ser retirado de todos os grupos externos participantes. <br>
        Quando a data de retorno se incide de segunda à quinta o militar deverá bater as metas de seus grupos, de sexta à domingo o militar estará isento de cumprir as metas. <br>
        Confira a data do seu retorno para evitar problemas. Você não pode inserir mais de 2 JA's por mês.
    </div>
  </div>
  <div class="mt-3">
    {% if avais %}
    {% for aval in avais %}
    <div class="card text-light mb-3 m-auto shadow col-12" style="background-color: #2C4C00;">
        <div class="row g-0">
          <div class="col-md-4 text-center" >
            <img class="mb-auto" src="https://www.habbo.com.br/habbo-imaging/avatarimage?img_format=png&user={{ aval.solicitante.username}}&direction=2&head_direction=2&size=l&action=std" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body mt-3">
              <p class="card-text"><strong> Motivo: </strong>{{aval.motivo}}</p>
              <p class="card-text"><strong> Duração: </strong>{{aval.duracao}}</p>
              <p class="card-text"><strong> Início: </strong>{{aval.data}}</p>
              <p class="card-text"><strong> Fim: </strong>{{aval.data2}}</p>
              <p class="card-text"><small class="text-body-light">Enviado em {{aval.datatime}}</small></p>
              <span class="badge {% if aval.status == 'Aprovado' %} text-bg-success {% elif aval.status == 'Reprovado' %} text-bg-danger {% elif aval.status == 'Em análise...' %} text-bg-secondary {% endif %}">{{aval.status}}</span>
            </div>
          </div>
        </div>
      </div>
    <br>
    {% endfor %}
    {% else %}
    <div class="alert alert-secondary" role="alert">
      Você não possui nenhum aval registrado!
    </div>    
    {% endif %}
  </div>
</div>
{% endblock main %}